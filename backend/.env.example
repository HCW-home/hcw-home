# .env.example
# Copy this file to .env and fill in the appropriate values

# Application Environment (REQUIRED)
# Options: development, staging, production
NODE_ENV=development

# Server Configuration
PORT=3000

# Enhanced Authentication Configuration
# LOGIN_METHOD options: 'password', 'openid', or 'mixed'
LOGIN_METHOD=password

# Allow mixed authentication (both password and OIDC) - overrides strict LOGIN_METHOD
ALLOW_MIXED_AUTH=true

# OIDC Failover Configuration - Enable password login as fallback when OIDC fails
OIDC_FAILOVER_ENABLED=true

# Frontend Application URLs - REQUIRED FOR PATIENT FLOW TRANSITIONS
# Patient Application URL - Used for patient routing and redirects
PATIENT_URL=http://localhost:4201

# Practitioner Application URL - Used for practitioner routing
PRACTITIONER_URL=http://localhost:4202

# Admin Application URL - Used for admin routing
ADMIN_URL=http://localhost:4200

# Backend API Base URL - Used for API endpoint generation
BACKEND_API_BASE_URL=http://localhost:3000

# CORS Configuration - Include all frontend URLs
CORS_ORIGINS=http://localhost:4200,http://localhost:4201,http://localhost:4202

# Database Configuration
DATABASE_URL="postgresql://username:password@localhost:5432/database_name?schema=public"

# Payment Processing
STRIPE_SECRET_KEY=""
STRIPE_PUBLISHABLE_KEY=

# Redis for Mediasoup cluster/load reporting (REQUIRED)
REDIS_URL=redis://localhost:6379

# Unique identifier for this media server NODE (REQUIRED for cluster)
SERVER_ID=server1

# Chat Module Configuration
# Maximum file size for chat attachments (in MB)
CHAT_MAX_FILE_SIZE_MB=10

# Maximum number of messages to return in history requests
CHAT_MESSAGE_HISTORY_LIMIT=50

# Timeout for typing indicators (in milliseconds)
CHAT_TYPING_TIMEOUT_MS=3000

# Inactivity timeout for stopping typing indicators (in milliseconds)
CHAT_TYPING_INACTIVITY_MS=5000

# Time limit for editing messages (in minutes)
CHAT_MESSAGE_EDIT_TIMEOUT_MINUTES=5

# Enable/disable file uploads in chat
CHAT_FILE_UPLOAD_ENABLED=true

# Enable/disable image uploads in chat
CHAT_IMAGE_UPLOAD_ENABLED=true

# Allowed file types for chat uploads (comma-separated MIME types)
CHAT_ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# Security Configuration (REQUIRED in production)
APP_SECRET=your-super-secret-jwt-key-here
ACCESS_TOKEN_LIFE=24h
REFRESH_TOKEN_LIFE=7d
JWT_REFRESH_SECRET=your-refresh-secret-here

# MediaSoup Configuration (REQUIRED)
MEDIASOUP_ANNOUNCED_IP=127.0.0.1
PRODUCER_STATS_POLL_INTERVAL=5000
TRANSPORT_STATS_POLL_INTERVAL=5000

# Session Configuration for Patient Flow
SESSION_TIMEOUT_MS=1800000
CONSULTATION_TIMEOUT_MS=3600000

# WebSocket Configuration
WEBSOCKET_NAMESPACE=/

# Email Configuration
EMAIL_SENDGRID_API_KEY=your-sendgrid-api-key
EMAIL_SENDER_ADDRESS=noreply@yourdomain.com
EMAIL_REMINDER_LEAD_MINUTES=60

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000

# Logging Configuration
LOGFORMAT=default
LOG_LEVEL=debug

# WhatsApp template json file path 
WHATSAPP_TEMPLATES_PATH=src/json/whatsapp-templates.json

# Consultation Data Retention
CONSULTATION_RETENTION_HOURS=24
CONSULTATION_DELETION_BUFFER_HOURS=2

# SSL/TLS for HTTPS
SSL_KEY_PATH=
SSL_CERT_PATH=

# Monitoring/Logging
MONITORING_DSN=

# Security Headers
HELMET_HSTS_MAX_AGE=

######################
### AUTHENTICATION ###
# Define enabled authentication methods
# Can be one of the following choice
# openid : user will login with openid only.
# password : user allowed to logged in with password too
LOGIN_METHOD=openid

# OpenID configuration.    given for testing perpose
OPENID_ISSUER_URL=https://dev-1top0t1k87t4066s.us.auth0.com/
OPENID_AUTHORIZATION_URL=https://dev-1top0t1k87t4066s.us.auth0.com/authorize
OPENID_TOKEN_URL=https://dev-1top0t1k87t4066s.us.auth0.com/oauth/token
OPENID_USERINFO_URL=https://dev-1top0t1k87t4066s.us.auth0.com/userinfo
OPENID_CLIENT_ID=wQ9a6B0mMQqkzrtghGq1a7i5gTSvVslZ
OPENID_CLIENT_SECRET=krqj5cj_xF3AGS6K86RyZmN1KoZobehJQQYMVZ9yOWBiSb9jgPcySDDFu0SH8gpL
OPENID_CALLBACK_BASE_URL=http://localhost:3000/api/v1/auth/callback
OPENID_SCOPE=openid,profile,email
OPENID_AUTOCREATE_USER=true

# Mediasoup Configuration
MEDIASOUP_ANNOUNCED_IP=your_server_ip

TRANSPORT_STATS_POLL_INTERVAL=500
PRODUCER_STATS_POLL_INTERVAL=5000

# SendGrid API key
EMAIL_SENDGRID_API_KEY=YOUR_SENDGRID_API_KEY_HERE

# The email address from which system emails are sent
EMAIL_SENDER_ADDRESS=no-reply@yourdomain.com

# Email reminder lead time in minutes before scheduled consultation (default 60)
EMAIL_REMINDER_LEAD_MINUTES=60


# Cloudinary Configuration
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Twilio Configuration for WhatsApp
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token

# Maximum file size for uploads in MB (default: 10)
MAX_FILE_SIZE_MB=10
